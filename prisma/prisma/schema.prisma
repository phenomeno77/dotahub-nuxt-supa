generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model users {
  id               String     @id @default(uuid()) @db.Uuid
  username         String?
  avatarUrl        String?
  steamId          String?    @unique
  userStatus       UserStatus @default(active)
  role             UserRole   @default(user)
  isPremium        Boolean    @default(false)
  premiumExpiresAt DateTime?
  postsToday       Int        @default(0)
  commentsToday    Int        @default(0)
  lastPostReset    DateTime   @default(now())
  lastCommentReset DateTime   @default(now())
  lastLoginAt      DateTime?
  isLoggedIn       Boolean    @default(false)
  updatedAt        DateTime   @updatedAt
  authUser         authUser   @relation(fields: [id], references: [id], onDelete: Cascade)
}

model authUser {
  id    String  @id @db.Uuid
  email String?
  user  users?

  @@map("auth.users")
}

enum UserRole {
  user
  admin
  moderator
}

enum UserStatus {
  active
  banned
  deleted
}

enum Position {
  carry
  mid
  offlane
  soft_support
  hard_support
}

enum Rank {
  Herald
  Guardian
  Crusader
  Archon
  Legend
  Ancient
  Divine
  Immortal
}
